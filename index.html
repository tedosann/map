<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>USS Sperry WWII Route</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        body, html {
            height: 100vh;
            margin: 0;
            padding: 0;
        }
        #map {
            height: 100vh;
            width: 100%;
        }
    </style>
</head>
<body>
<div id="map"></div>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet-antimeridian@1.0.0/dist/leaflet-antimeridian.js"></script>
<script>
    // Explicitly set initial map view centered on the Pacific
    const map = L.map('map', {worldCopyJump: true}).setView([20, 180], 3);

    // Add OpenStreetMap tiles
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 18,
        attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    // Original route coordinates
    const route = [
        [40.0, -74.0],     // East Coast USA
        [10.0, -79.5],     // Panama
        [21.3, -157.8],    // Hawaii
        [35.7, 139.7],     // Tokyo, Japan
        [22.3, 114.2]      // Hong Kong
    ];

    // Draw polyline using antimeridian-aware plugin
    const polyline = L.polyline(route, {color: 'blue'});
    const wrappedPolyline = L.polyline.antimeridian(polyline.getLatLngs(), {color: 'blue'}).addTo(map);

    // Fit bounds to the wrapped polyline
    map.fitBounds(wrappedPolyline.getBounds(), {padding: [50, 50]});
</script>
</body>
</html>
